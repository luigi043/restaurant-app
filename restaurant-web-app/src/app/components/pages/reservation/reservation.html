<div class="reservation-page">
  <!-- CabeÃ§alho da pÃ¡gina -->
  <header class="page-header">
    <div class="container">
      <h1 class="page-title">ğŸ½ï¸ Reserva de Mesa</h1>
      <p class="page-subtitle">Garanta sua experiÃªncia gastronÃ´mica italiana</p>
    </div>
  </header>

  <div class="container reservation-container">
    <!-- FormulÃ¡rio de reserva -->
    <div *ngIf="!reservaRealizada" class="reservation-form-section">
      <div class="reservation-layout">
        <!-- InformaÃ§Ãµes sobre reservas -->
        <aside class="reservation-info">
          <div class="info-card">
            <h2 class="info-title">ğŸ‡®ğŸ‡¹ Trattoria Bella Italia</h2>
            <p class="info-subtitle">Reserve sua mesa com antecedÃªncia</p>

            <!-- HorÃ¡rios -->
            <div class="info-section">
              <h3>â° HorÃ¡rio de Funcionamento</h3>
              <div class="info-content">
                <div class="info-item">
                  <span class="info-label">TerÃ§a a Quinta</span>
                  <span class="info-value">18:00 - 23:00</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Sexta e SÃ¡bado</span>
                  <span class="info-value">18:00 - 00:00</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Domingo</span>
                  <span class="info-value">12:00 - 22:00</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Segunda</span>
                  <span class="info-value">Fechado</span>
                </div>
              </div>
            </div>

            <!-- Capacidade -->
            <div class="info-section">
              <h3>ğŸ‘¥ Capacidade</h3>
              <div class="info-content">
                <div class="info-item">
                  <span class="info-label">Mesa para 2-4 pessoas</span>
                  <span class="info-value">DisponÃ­vel</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Mesa para 5-8 pessoas</span>
                  <span class="info-value">Sob consulta</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Mesa para 9-12 pessoas</span>
                  <span class="info-value">Sob consulta</span>
                </div>
              </div>
            </div>

            <!-- InformaÃ§Ãµes importantes -->
            <div class="info-section">
              <h3>ğŸ“‹ InformaÃ§Ãµes Importantes</h3>
              <div class="info-list">
                <div class="info-point">
                  <span class="point-icon">â±ï¸</span>
                  <span class="point-text">Sua mesa serÃ¡ reservada por 2 horas</span>
                </div>
                <div class="info-point">
                  <span class="point-icon">ğŸ“</span>
                  <span class="point-text">Ligue-nos para grupos maiores</span>
                </div>
                <div class="info-point">
                  <span class="point-icon">ğŸš­</span>
                  <span class="point-text">Ambiente nÃ£o-fumante</span>
                </div>
                <div class="info-point">
                  <span class="point-icon">ğŸ•</span>
                  <span class="point-text">Pet-friendly na Ã¡rea externa</span>
                </div>
              </div>
            </div>

            <!-- Contato -->
            <div class="contact-info">
              <h3>ğŸ“ Precisa de ajuda?</h3>
              <p>Ligue para nÃ³s: <strong>(11) 9999-9999</strong></p>
              <p>Ou envie um e-mail: <strong>reservas@trattoriaitalia.com</strong></p>
            </div>
          </div>
        </aside>

        <!-- FormulÃ¡rio principal -->
        <main class="reservation-form">
          <div class="form-card">
            <h2 class="form-title">FaÃ§a sua Reserva</h2>
            <p class="form-subtitle">Preencha os dados abaixo para garantir sua mesa</p>

            <form [formGroup]="reservaForm" class="reservation-form-fields">
              <!-- Dados pessoais -->
              <div class="form-section">
                <h3 class="section-title">ğŸ‘¤ Seus Dados</h3>

                <div class="form-group">
                  <label for="nome">Nome Completo *</label>
                  <input
                    type="text"
                    id="nome"
                    formControlName="nome"
                    placeholder="Digite seu nome completo"
                    [class.invalid]="f['nome'].invalid && f['nome'].touched">
                  <div *ngIf="f['nome'].invalid && f['nome'].touched" class="error-message">
                    <span *ngIf="f['nome'].errors?.['required']">Nome Ã© obrigatÃ³rio</span>
                    <span *ngIf="f['nome'].errors?.['minlength']">Nome deve ter pelo menos 3 caracteres</span>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label for="email">E-mail *</label>
                    <input
                      type="email"
                      id="email"
                      formControlName="email"
                      placeholder="seu@email.com"
                      [class.invalid]="f['email'].invalid && f['email'].touched">
                    <div *ngIf="f['email'].invalid && f['email'].touched" class="error-message">
                      <span *ngIf="f['email'].errors?.['required']">E-mail Ã© obrigatÃ³rio</span>
                      <span *ngIf="f['email'].errors?.['email']">Digite um e-mail vÃ¡lido</span>
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="telefone">Telefone *</label>
                    <input
                      type="tel"
                      id="telefone"
                      formControlName="telefone"
                      placeholder="(11) 99999-9999"
                      [class.invalid]="f['telefone'].invalid && f['telefone'].touched">
                    <div *ngIf="f['telefone'].invalid && f['telefone'].touched" class="error-message">
                      <span *ngIf="f['telefone'].errors?.['required']">Telefone Ã© obrigatÃ³rio</span>
                      <span *ngIf="f['telefone'].errors?.['pattern']">Digite um telefone vÃ¡lido</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Detalhes da reserva -->
              <div class="form-section">
                <h3 class="section-title">ğŸ“… Detalhes da Reserva</h3>

                <div class="form-row">
                  <div class="form-group">
                    <label for="data">Data *</label>
                    <input
                      type="date"
                      id="data"
                      formControlName="data"
                      [min]="dataMinima"
                      [max]="dataMaxima"
                      [class.invalid]="f['data'].invalid && f['data'].touched">
                    <div *ngIf="f['data'].invalid && f['data'].touched" class="error-message">
                      Data Ã© obrigatÃ³ria
                    </div>
                    <div class="date-info">
                      <span *ngIf="dataEhHoje" class="info-today">ğŸ—“ï¸ Hoje</span>
                      <span *ngIf="dataEhFimDeSemana" class="info-weekend">ğŸ‰ Fim de semana</span>
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="hora">HorÃ¡rio *</label>
                    <select
                      id="hora"
                      formControlName="hora"
                      [class.invalid]="f['hora'].invalid && f['hora'].touched">
                      <option *ngFor="let hora of horariosDisponiveis" [value]="hora">
                        {{ formatarHora(hora) }}
                      </option>
                    </select>
                    <div *ngIf="f['hora'].invalid && f['hora'].touched" class="error-message">
                      HorÃ¡rio Ã© obrigatÃ³rio
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="numeroPessoas">NÃºmero de Pessoas *</label>
                    <div class="people-selector">
                      <button
                        type="button"
                        class="btn-people"
                        (click)="decrementarPessoas()"
                        [disabled]="f['numeroPessoas'].value <= minPessoas">
                        âˆ’
                      </button>

                      <input
                        type="number"
                        id="numeroPessoas"
                        formControlName="numeroPessoas"
                        [min]="minPessoas"
                        [max]="maxPessoas"
                        class="people-input"
                        readonly>

                      <button
                        type="button"
                        class="btn-people"
                        (click)="incrementarPessoas()"
                        [disabled]="f['numeroPessoas'].value >= maxPessoas">
                        +
                      </button>
                    </div>
                    <div class="people-info">
                      <span>MÃ­nimo: {{ minPessoas }} | MÃ¡ximo: {{ maxPessoas }}</span>
                    </div>
                  </div>
                </div>

                <!-- Disponibilidade -->
                <div class="availability-check" *ngIf="f['data'].value && f['hora'].value">
                  <div class="availability-status" [class.available]="horarioDisponivel" [class.unavailable]="!horarioDisponivel">
                    <span class="status-icon">
                      {{ verificandoDisponibilidade ? 'â³' : (horarioDisponivel ? 'âœ…' : 'âŒ') }}
                    </span>
                    <span class="status-text">
                      {{ verificandoDisponibilidade ? 'Verificando disponibilidade...' :
                         (horarioDisponivel ? 'HorÃ¡rio disponÃ­vel!' : 'HorÃ¡rio indisponÃ­vel') }}
                    </span>
                  </div>
                  <div *ngIf="!horarioDisponivel" class="availability-suggestions">
                    <p>SugestÃµes de horÃ¡rios prÃ³ximos:</p>
                    <div class="suggested-times">
                      <button
                        *ngFor="let hora of getHorariosAlternativos()"
                        type="button"
                        class="btn-time-suggestion"
                        (click)="selecionarHorarioAlternativo(hora)">
                        {{ formatarHora(hora) }}
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- ObservaÃ§Ãµes -->
              <div class="form-section">
                <h3 class="section-title">ğŸ“ ObservaÃ§Ãµes</h3>
                <div class="form-group">
                  <label for="observacoes">ObservaÃ§Ãµes Especiais</label>
                  <textarea
                    id="observacoes"
                    formControlName="observacoes"
                    placeholder="Alergias, aniversÃ¡rio, ocasiÃ£o especial, etc."
                    rows="3"></textarea>
                  <div class="textarea-info">
                    <span>Nos informe se hÃ¡ alguma necessidade especial</span>
                  </div>
                </div>
              </div>

              <!-- BotÃ£o de reserva -->
              <div class="form-actions">
                <button
                  type="button"
                  class="btn btn-primary btn-reserve"
                  (click)="enviarReserva()"
                  [disabled]="reservaForm.invalid || !horarioDisponivel || carregando">
                  <span *ngIf="!carregando">âœ… Confirmar Reserva</span>
                  <span *ngIf="carregando">â³ Processando...</span>
                </button>

                <div class="form-note">
                  <span class="note-icon">â„¹ï¸</span>
                  <span class="note-text">
                    VocÃª receberÃ¡ uma confirmaÃ§Ã£o por e-mail.
                    Reservas podem ser canceladas atÃ© 2 horas antes.
                  </span>
                </div>
              </div>
            </form>
          </div>
        </main>
      </div>
    </div>

    <!-- ConfirmaÃ§Ã£o da reserva -->
    <div *ngIf="reservaRealizada && reservaConfirmada" class="reservation-confirmation">
      <div class="confirmation-card">
        <div class="confirmation-header">
          <div class="confirmation-icon">ğŸ‰</div>
          <h2>Reserva Confirmada!</h2>
          <p class="confirmation-subtitle">Sua mesa estÃ¡ reservada na Trattoria Bella Italia</p>
        </div>

        <div class="confirmation-details">
          <!-- NÃºmero da reserva -->
          <div class="detail-section highlight">
            <h3>NÃºmero da Reserva</h3>
            <div class="reservation-number">{{ numeroReserva }}</div>
            <p class="detail-note">Guarde este nÃºmero para referÃªncia</p>
          </div>

          <!-- Detalhes da reserva -->
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">ğŸ‘¤ Nome</span>
              <span class="detail-value">{{ reservaConfirmada.nome }}</span>
            </div>

            <div class="detail-item">
              <span class="detail-label">ğŸ“… Data</span>
              <span class="detail-value">{{ formatarData(reservaConfirmada.data.toString()) }}</span>
            </div>

            <div class="detail-item">
              <span class="detail-label">â° HorÃ¡rio</span>
              <span class="detail-value">{{ formatarHora(reservaConfirmada.hora) }}</span>
            </div>

            <div class="detail-item">
              <span class="detail-label">ğŸ‘¥ Pessoas</span>
              <span class="detail-value">{{ reservaConfirmada.numeroPessoas }} pessoa(s)</span>
            </div>

            <div class="detail-item">
              <span class="detail-label">ğŸ“ Telefone</span>
              <span class="detail-value">{{ reservaConfirmada.telefone }}</span>
            </div>

            <div class="detail-item">
              <span class="detail-label">âœ‰ï¸ E-mail</span>
              <span class="detail-value">{{ reservaConfirmada.email }}</span>
            </div>
          </div>

          <!-- ObservaÃ§Ãµes -->
          <div *ngIf="reservaConfirmada.observacoes" class="detail-section">
            <h3>ObservaÃ§Ãµes</h3>
            <p class="observations">{{ reservaConfirmada.observacoes }}</p>
          </div>

          <!-- InformaÃ§Ãµes importantes -->
          <div class="important-info">
            <h3>ğŸ“‹ InformaÃ§Ãµes Importantes</h3>
            <div class="info-list">
              <div class="info-item">
                <span class="info-icon">â°</span>
                <span class="info-text">Chegue 10 minutos antes do horÃ¡rio reservado</span>
              </div>
              <div class="info-item">
                <span class="info-icon">ğŸ”„</span>
                <span class="info-text">Cancelamento gratuito atÃ© 2 horas antes</span>
              </div>
              <div class="info-item">
                <span class="info-icon">ğŸ“§</span>
                <span class="info-text">ConfirmaÃ§Ã£o enviada para {{ reservaConfirmada.email }}</span>
              </div>
            </div>
          </div>
        </div>

        <!-- AÃ§Ãµes -->
        <div class="confirmation-actions">
          <button class="btn btn-primary" (click)="fazerNovaReserva()">
            ğŸ“… Fazer Outra Reserva
          </button>
          <button class="btn btn-secondary" routerLink="/home">
            ğŸ  Voltar para InÃ­cio
          </button>
        </div>

        <!-- Contato -->
        <div class="confirmation-contact">
          <p>Precisa de ajuda? Ligue para nÃ³s: <strong>(11) 9999-9999</strong></p>
        </div>
      </div>
    </div>
  </div>
</div>
