<div class="dish-detail-page">
  <!-- Cabe√ßalho da p√°gina -->
  <header class="page-header" *ngIf="prato">
    <div class="container">
      <button class="btn-back" (click)="voltarParaCardapio()">
        ‚Üê Voltar para Card√°pio
      </button>
      <h1 class="page-title">{{ prato.nome }}</h1>
      <div class="page-subtitle">
        <span class="category-badge">
          {{ getCategoriaIcon(prato.categoria) }}
          {{ prato.categoria | titlecase }}
        </span>
        <span class="price-badge">{{ formatarPreco(prato.preco) }}</span>
      </div>
    </div>
  </header>

  <div class="container dish-detail-container">
  <!-- Substituir loading state: -->
<div class="loading-state" *ngIf="carregando">
  <div class="loading-content">
    <app-loading-skeleton type="image" [height]="'400px'"></app-loading-skeleton>
    <div class="loading-info">
      <app-loading-skeleton type="text" [count]="4"></app-loading-skeleton>
    </div>
  </div>
</div>

<!-- Substituir error state: -->
<div class="error-state" *ngIf="erro && !carregando">
  <app-empty-state
    icon="‚ùå"
    title="Prato n√£o encontrado"
    [message]="mensagemErro"
    [buttonLink]="'/menu'"
    buttonText="Voltar para Card√°pio">
  </app-empty-state>
</div>

    <!-- Conte√∫do do prato -->
    <div *ngIf="prato && !carregando && !erro" class="dish-content">
      <div class="dish-layout">
        <!-- Imagem principal -->
        <div class="dish-image-section">
          <div class="image-container">
            <img [src]="prato.imagem" [alt]="prato.nome" class="dish-main-image">

            <!-- Badges -->
            <div class="image-badges">
              <span *ngIf="isDestaque" class="badge destaque">
                ‚≠ê Destaque
              </span>
              <span *ngIf="isVegetariano" class="badge vegetariano">
                üå± Vegetariano
              </span>
              <span *ngIf="isPicante" class="badge picante">
                üå∂Ô∏è Picante
              </span>
            </div>
          </div>

          <!-- Miniaturas (poderia ter m√∫ltiplas imagens) -->
          <div class="image-thumbnails">
            <div class="thumbnail active">
              <img [src]="prato.imagem" [alt]="prato.nome + ' - vista 1'">
            </div>
            <!-- Em uma aplica√ß√£o real, ter√≠amos mais imagens aqui -->
          </div>
        </div>

        <!-- Informa√ß√µes do prato -->
        <div class="dish-info-section">
          <!-- T√≠tulo e pre√ßo -->
          <div class="dish-header">
            <h1 class="dish-title">{{ prato.nome }}</h1>
            <div class="dish-price">
              <span class="price">{{ formatarPreco(prato.preco) }}</span>
              <span class="price-note">Pre√ßo unit√°rio</span>
            </div>
          </div>

          <!-- Avalia√ß√£o (fake) -->
          <div class="dish-rating">
            <div class="stars">
              <span class="star">‚≠ê</span>
              <span class="star">‚≠ê</span>
              <span class="star">‚≠ê</span>
              <span class="star">‚≠ê</span>
              <span class="star">‚≠ê</span>
              <span class="rating-value">4.8</span>
            </div>
            <span class="rating-count">(128 avalia√ß√µes)</span>
          </div>

          <!-- Descri√ß√£o curta -->
          <p class="dish-short-description">{{ prato.descricao }}</p>

          <!-- Informa√ß√µes r√°pidas -->
          <div class="dish-quick-info">
            <div class="info-item">
              <span class="info-icon">‚è±Ô∏è</span>
              <div class="info-content">
                <span class="info-label">Tempo de preparo</span>
                <span class="info-value">{{ prato.tempoPreparo }} minutos</span>
              </div>
            </div>

            <div class="info-item" *ngIf="prato.calorias">
              <span class="info-icon">üî•</span>
              <div class="info-content">
                <span class="info-label">Calorias</span>
                <span class="info-value">{{ prato.calorias }} kcal</span>
              </div>
            </div>

            <div class="info-item">
              <span class="info-icon">üçΩÔ∏è</span>
              <div class="info-content">
                <span class="info-label">Categoria</span>
                <span class="info-value">{{ prato.categoria | titlecase }}</span>
              </div>
            </div>
          </div>

          <!-- Controle de quantidade -->
          <div class="quantity-section">
            <h3 class="section-title">Quantidade</h3>
            <div class="quantity-controls">
              <button
                class="btn-quantity btn-decrease"
                (click)="diminuirQuantidade()"
                [disabled]="quantidade <= minQuantidade"
                aria-label="Diminuir quantidade">
                ‚àí
              </button>

              <input
                type="number"
                [value]="quantidade"
                (change)="atualizarQuantidade($event)"
                [min]="minQuantidade"
                [max]="maxQuantidade"
                class="quantity-input"
                aria-label="Quantidade">

              <button
                class="btn-quantity btn-increase"
                (click)="aumentarQuantidade()"
                [disabled]="quantidade >= maxQuantidade"
                aria-label="Aumentar quantidade">
                +
              </button>
            </div>
            <div class="quantity-info">
              <span>Total: <strong>{{ formatarPreco(calcularTotal()) }}</strong></span>
            </div>
          </div>

          <!-- Bot√µes de a√ß√£o -->
          <div class="action-buttons">
            <button
              class="btn btn-primary btn-add-cart"
              (click)="adicionarAoCarrinho()">
              üõí Adicionar ao Carrinho
            </button>

            <button
              class="btn btn-secondary btn-buy-now"
              (click)="comprarAgora()">
              üöÄ Comprar Agora
            </button>
          </div>

          <!-- Informa√ß√µes de entrega -->
          <div class="delivery-info">
            <div class="info-item">
              <span class="info-icon">üöö</span>
              <span class="info-text">Entrega em 30-45 minutos</span>
            </div>
            <div class="info-item">
              <span class="info-icon">üîÑ</span>
              <span class="info-text">Troca ou cancelamento gr√°tis</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Detalhes do prato (abas) -->
      <div class="dish-details-section">
        <!-- Navega√ß√£o das abas -->
        <div class="details-tabs">
          <button
            class="tab-btn"
            [class.active]="modoVisualizacao === 'descricao'"
            (click)="mudarModoVisualizacao('descricao')">
            üìñ Descri√ß√£o
          </button>

          <button
            class="tab-btn"
            [class.active]="modoVisualizacao === 'ingredientes'"
            (click)="mudarModoVisualizacao('ingredientes')">
            ü•ï Ingredientes
          </button>

          <button
            class="tab-btn"
            [class.active]="modoVisualizacao === 'nutricional'"
            (click)="mudarModoVisualizacao('nutricional')"
            [disabled]="!prato.calorias">
            üìä Informa√ß√£o Nutricional
          </button>
        </div>

        <!-- Conte√∫do das abas -->
        <div class="details-content">
          <!-- Descri√ß√£o -->
          <div *ngIf="modoVisualizacao === 'descricao'" class="tab-content description">
            <h3>Sobre este prato</h3>
            <p>{{ prato.descricao }}</p>

            <div class="preparation-info" *ngIf="prato.tempoPreparo">
              <h4>‚è±Ô∏è Prepara√ß√£o</h4>
              <p>Este prato √© preparado em aproximadamente {{ prato.tempoPreparo }} minutos por nossos chefs especializados.</p>
            </div>

            <div class="origin-info">
              <h4>üáÆüáπ Origem Italiana</h4>
              <p>Receita tradicional italiana preparada com ingredientes importados e t√©cnicas aut√™nticas.</p>
            </div>
          </div>

          <!-- Ingredientes -->
          <div *ngIf="modoVisualizacao === 'ingredientes'" class="tab-content ingredients">
            <h3>ü•ï Ingredientes</h3>

            <div class="ingredients-list">
              <div *ngFor="let ingrediente of prato.ingredientes" class="ingredient-item">
                <span class="ingredient-icon">‚úì</span>
                <span class="ingredient-name">{{ ingrediente }}</span>
              </div>
            </div>

            <div class="allergens-info" *ngIf="isVegetariano">
              <h4>üå± Informa√ß√µes sobre Alerg√™nicos</h4>
              <p>Este prato √© <strong>vegetariano</strong> e pode conter:</p>
              <ul>
                <li>Lactose (queijos italianos)</li>
                <li>Gl√∫ten (massas tradicionais)</li>
                <li *ngIf="contemOvo()">Ovos</li>
              </ul>
            </div>
          </div>

          <!-- Informa√ß√£o Nutricional -->
          <div *ngIf="modoVisualizacao === 'nutricional' && prato.calorias" class="tab-content nutritional">
            <h3>üìä Informa√ß√£o Nutricional</h3>

            <div class="nutritional-facts">
              <div class="fact-item main">
                <span class="fact-label">Valor Energ√©tico</span>
                <span class="fact-value">{{ prato.calorias }} kcal</span>
              </div>

              <div class="fact-item">
                <span class="fact-label">Por√ß√£o</span>
                <span class="fact-value">1 unidade</span>
              </div>

              <!-- Valores fict√≠cios para demonstra√ß√£o -->
              <div class="fact-item">
                <span class="fact-label">Carboidratos</span>
                <span class="fact-value">45g</span>
              </div>

              <div class="fact-item">
                <span class="fact-label">Prote√≠nas</span>
                <span class="fact-value">25g</span>
              </div>

              <div class="fact-item">
                <span class="fact-label">Gorduras</span>
                <span class="fact-value">15g</span>
              </div>

              <div class="fact-item">
                <span class="fact-label">Fibras</span>
                <span class="fact-value">8g</span>
              </div>
            </div>

            <div class="nutritional-note">
              <p>* Valores aproximados por por√ß√£o. Valores podem variar conforme preparo.</p>
            </div>
          </div>

          <div *ngIf="modoVisualizacao === 'nutricional' && !prato.calorias" class="tab-content nutritional">
            <div class="no-nutritional-info">
              <span class="info-icon">üìä</span>
              <h4>Informa√ß√£o nutricional n√£o dispon√≠vel</h4>
              <p>As informa√ß√µes nutricionais para este prato ainda n√£o foram cadastradas.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Pratos relacionados -->
      <div class="related-dishes-section" *ngIf="pratosRelacionados.length > 0">
        <div class="section-header">
          <h2 class="section-title">üçΩÔ∏è Voc√™ tamb√©m pode gostar</h2>
          <p class="section-subtitle">Pratos similares da mesma categoria</p>
        </div>

        <div class="related-dishes-grid">
          <div *ngFor="let pratoRelacionado of pratosRelacionados" class="related-dish-card">
            <a [routerLink]="['/dish', pratoRelacionado.id]" class="dish-link">
              <img [src]="pratoRelacionado.imagem" [alt]="pratoRelacionado.nome" class="dish-image">
              <div class="dish-info">
                <h3 class="dish-name">{{ pratoRelacionado.nome }}</h3>
                <p class="dish-price">{{ formatarPreco(pratoRelacionado.preco) }}</p>
              </div>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
